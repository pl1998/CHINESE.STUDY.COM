import{_ as $}from"./App-97ad6fa9.js";import{x as C,y as E,r as d,A as j,h as A,l as P,o as n,c as B,w as N,g as F,a as o,b as p,j as c,m as b,F as m,t as _,u as V,B as L,d as M,k as g,s as S}from"./app-b5306f00.js";import{_ as T}from"./Banner-619bd4b4.js";import{_ as D}from"./Breadcrumb-ac1d0c01.js";const I={class:"bg-white pt-[112px]"},O={class:"w-full"},q={class:"max-w-6xl mx-auto w-full px-4 pb-8"},z={class:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 py-8 px-4"},H=["onClick"],R=["src"],U={class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col items-center text-white text-center px-4 pb-4"},G={class:"text-2xl font-bold mt-[100px]"},J={class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-40 flex flex-col items-center justify-center text-white text-center px-4 transition-all duration-300"},K={key:0,class:"text-sm flex items-center"},Q={key:1,class:"text-base font-semibold opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300"},W=["src"],X={class:"max-w-4xl mx-auto flex justify-center items-center gap-2 py-8"},Y=["disabled"],Z=["disabled"],ee=["onClick"],te=["disabled"],ae=["disabled"],le={__name:"Practice",props:{config:{type:Object,required:!0}},setup(x){C.add(E);const v=d([]),r=d({current_page:1,last_page:1,per_page:6,total:0}),l=j({}),i=d(null),f=async(a=1)=>{const e=await F.get(`/api/course-practices?page=${a}&per_page=${r.value.per_page}`);v.value=e.data.data,r.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total}};A(()=>f());const u=a=>{a<1||a>r.value.last_page||f(a)},h=a=>{console.error("Audio loading error:",a),i.value=null},y=async a=>{try{Object.keys(l).forEach(t=>{l[t]&&t!=a&&(l[t].pause(),l[t].currentTime=0)});const e=l[a];if(!e){console.error("Audio element not found");return}e.readyState===0&&await new Promise((t,s)=>{e.addEventListener("canplaythrough",t,{once:!0}),e.addEventListener("error",s,{once:!0}),e.load()}),i.value===a?(e.pause(),i.value=null):(await e.play(),i.value=a)}catch(e){console.error("Error playing audio:",e),i.value=null}},w=P(()=>{const a=r.value.last_page,e=r.value.current_page;if(a<=7)return Array.from({length:a},(s,k)=>k+1);const t=[];e>3&&t.push(1),e>4&&t.push("...");for(let s=Math.max(1,e-1);s<=Math.min(a,e+1);s++)t.push(s);return e<a-3&&t.push("..."),e<a-2&&t.push(a),t});return(a,e)=>(n(),B($,{config:x.config},{default:N(()=>[o("div",I,[o("div",O,[p(T,{imageSrc:"/images/banner/pratice.jpg",alt:"Practice Banner"})]),o("div",q,[p(D,{current:"Daily Practice"}),o("div",z,[(n(!0),c(m,null,b(v.value,t=>(n(),c("div",{key:t.id,class:"relative group border-2 border-white hover:border-[#009FE8] transition rounded block cursor-pointer overflow-hidden",onClick:s=>y(t.id)},[o("img",{src:t.cover,alt:"cover",class:"w-full h-56 object-cover rounded transition-transform duration-300 group-hover:scale-105"},null,8,R),o("div",U,[o("div",G,_(t.name),1)]),o("div",J,[i.value===t.id?(n(),c("div",K,[p(V(L),{icon:["fas","volume-up"],class:"mr-1"}),e[5]||(e[5]=M(" 正在播放... "))])):g("",!0),t.description?(n(),c("div",Q,_(t.description),1)):g("",!0)]),t.audio?(n(),c("audio",{key:0,ref_for:!0,ref:s=>{s?l[t.id]=s:delete l[t.id]},src:t.audio,onEnded:e[0]||(e[0]=s=>i.value=null),onError:h,preload:"auto",style:{display:"none"}},null,40,W)):g("",!0)],8,H))),128))]),o("div",X,[o("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[1]||(e[1]=t=>u(1))},"Home",8,Y),o("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[2]||(e[2]=t=>u(r.value.current_page-1))},"Previous",8,Z),(n(!0),c(m,null,b(w.value,t=>(n(),c("button",{key:t,class:S(["border px-3 py-1 rounded",{"bg-[#009FE8] text-white":t===r.value.current_page}]),onClick:s=>u(t)},_(t),11,ee))),128)),o("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[3]||(e[3]=t=>u(r.value.current_page+1))},"Next",8,te),o("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[4]||(e[4]=t=>u(r.value.last_page))},"End",8,ae)])])])]),_:1},8,["config"]))}};export{le as default};
