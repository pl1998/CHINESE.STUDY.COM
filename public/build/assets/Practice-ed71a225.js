import{A as N,B as D,Q as L,r as o,C as T,o as z,s as U,b as l,c as C,w as $,k as B,d as t,e as A,j as E,v as H,D as I,x as K,f as d,g as _,F as b,m as O,u as q,p as Q,t as i,n as R}from"./app-14eb41e8.js";import{_ as G}from"./App-53a58603.js";import{_ as J}from"./Banner-3a18ebc2.js";import{_ as W}from"./Breadcrumb-88e0ee4f.js";const X={class:"bg-white pt-[112px]"},Y={class:"w-full"},Z={class:"max-w-6xl mx-auto w-full px-4 pb-8"},ee={class:"bg-white p-6 rounded-lg shadow mb-8"},ae={class:"flex flex-wrap items-center gap-4"},te={class:"max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 py-8 px-4"},se={class:"flex items-center px-4 pt-4 pb-2"},re={class:"text-[#2196f3] text-sm font-medium"},oe=["src"],le={class:"px-4 py-3"},ne={class:"font-semibold text-base text-gray-800 mb-1"},de={class:"text-gray-600 text-sm"},ie={class:"max-w-4xl mx-auto flex justify-center items-center gap-2 py-8"},ce=["disabled"],ue=["disabled"],pe=["onClick"],ve=["disabled"],ge=["disabled"],_e={key:0,class:"mt-6"},be={class:"font-bold"},he={class:"text-sm text-gray-500"},we={__name:"Practice",props:{config:{type:Object,required:!0}},setup(P){N.add(D);const{level_label:V}=L().props,h=o([]),r=o({current_page:1,last_page:1,per_page:6,total:0}),c=T({}),v=o(null),g=o(""),m=o(""),u=o(""),x=o(""),y=o([]),w=o(!0),k=async(s=1)=>{const e=await B.get(`/api/course-practices?page=${s}&per_page=${r.value.per_page}&level_label=${V}`);h.value=e.data.data,r.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total}};z(async()=>{await k(),setTimeout(()=>{w.value=!1},500)});const p=s=>{s<1||s>r.value.last_page||k(s)},j=async s=>{try{Object.keys(c).forEach(a=>{c[a]&&a!=s&&(c[a].pause(),c[a].currentTime=0)});const e=c[s];if(!e){console.error("Audio element not found");return}e.readyState===0&&await new Promise((a,n)=>{e.addEventListener("canplaythrough",a,{once:!0}),e.addEventListener("error",n,{once:!0}),e.load()}),v.value===s?(e.pause(),v.value=null):(await e.play(),v.value=s)}catch(e){console.error("Error playing audio:",e),v.value=null}},M=U(()=>{const s=r.value.last_page,e=r.value.current_page;if(s<=7)return Array.from({length:s},(n,F)=>F+1);const a=[];e>3&&a.push(1),e>4&&a.push("...");for(let n=Math.max(1,e-1);n<=Math.min(s,e+1);n++)a.push(n);return e<s-3&&a.push("..."),e<s-2&&a.push(s),a}),f=async()=>{const s=await B.get("/api/course-practices",{params:{search:g.value,level:u.value,hsk:m.value,progress:x.value,level_label:u.value}});h.value=s.data.data,r.value={current_page:s.data.current_page,last_page:s.data.last_page,per_page:s.data.per_page,total:s.data.total}},S=()=>{g.value="",u.value="",m.value="",x.value="",f()};return(s,e)=>(l(),C(G,{config:P.config},{default:$(()=>[t("div",X,[t("div",Y,[A(J,{imageSrc:"/images/banner/pratice.jpg",alt:"Practice Banner"})]),t("div",Z,[A(W,{current:"Daily Practice"}),t("div",ee,[t("div",ae,[E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),onKeyup:I(f,["enter"]),type:"text",placeholder:"Search...",class:"flex-1 border rounded px-4 py-2"},null,544),[[H,g.value]]),E(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),class:"border rounded px-4 py-2 min-w-[120px]"},e[6]||(e[6]=[t("option",{value:"0"},"All Levels",-1),t("option",{value:"1"},"Beginner",-1),t("option",{value:"2"},"Intermediate",-1),t("option",{value:"3"},"Advanced",-1)]),512),[[K,u.value]]),t("button",{onClick:f,class:"border border-[#e53958] text-[#e53958] px-4 py-2 rounded hover:bg-[#e53958] hover:text-white transition"},"Apply filters"),t("button",{onClick:S,class:"border border-[#e53958] text-[#e53958] px-4 py-2 rounded hover:bg-[#e53958] hover:text-white transition"},"Clear filters")])]),t("div",te,[w.value?(l(),d(b,{key:0},_(6,a=>t("div",{key:a,class:"bg-white rounded border border-gray-300 shadow-lg overflow-hidden"},e[7]||(e[7]=[t("div",{class:"animate-pulse"},[t("div",{class:"flex items-center px-4 pt-4 pb-2"},[t("div",{class:"w-4 h-4 bg-gray-200 rounded mr-1"}),t("div",{class:"h-4 bg-gray-200 rounded w-24"})]),t("div",{class:"bg-gray-200 h-40 w-full"}),t("div",{class:"px-4 py-3"},[t("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/2"})])],-1)]))),64)):(l(!0),d(b,{key:1},_(h.value,a=>(l(),C(q(Q),{key:a.id,href:`/practice-detail/${a.id}`,class:"bg-white rounded border border-gray-300 shadow-lg hover:shadow-2xl overflow-hidden transition cursor-pointer",onClick:n=>j(a.id)},{default:$(()=>[t("div",se,[e[8]||(e[8]=t("svg",{class:"w-4 h-4 text-[#2196f3] mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M6 2a1 1 0 00-1 1v14l5-3 5 3V3a1 1 0 00-1-1H6z"})],-1)),t("span",re,i(a.level_label)+", Story ",1)]),t("img",{src:a.cover,alt:"cover",class:"w-full h-40 object-cover"},null,8,oe),t("div",le,[t("div",ne,i(a.name),1),t("div",de,i(a.zh_name),1)])]),_:2},1032,["href","onClick"]))),128))]),t("div",ie,[t("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[2]||(e[2]=a=>p(1))},"Home",8,ce),t("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[3]||(e[3]=a=>p(r.value.current_page-1))},"Previous",8,ue),(l(!0),d(b,null,_(M.value,a=>(l(),d("button",{key:a,class:R(["border px-3 py-1 rounded",{"bg-[#009FE8] text-white":a===r.value.current_page}]),onClick:n=>p(a)},i(a),11,pe))),128)),t("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[4]||(e[4]=a=>p(r.value.current_page+1))},"Next",8,ve),t("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[5]||(e[5]=a=>p(r.value.last_page))},"End",8,ge)]),y.value.length?(l(),d("div",_e,[(l(!0),d(b,null,_(y.value,a=>(l(),d("div",{key:a.id,class:"p-4 border-b"},[t("div",be,i(a.title),1),t("div",he,i(a.description),1)]))),128))])):O("",!0)])])]),_:1},8,["config"]))}};export{we as default};
