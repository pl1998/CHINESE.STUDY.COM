import{B as ee,C as te,G as se,H as oe,I as ne,J as le,K as ae,L as ie,M as re,r as v,Q as de,D as V,N as ue,o as ce,b as r,c as me,w as fe,d as e,e as C,u as i,O as P,h as R,t as l,P as A,f as u,m as p,i as I,j as h,v as _,g as pe,F as xe,R as ve,k as z}from"./app-c6e42187.js";import{_ as be,S as $}from"./App-026617b1.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";const he={class:"pt-[112px]"},ye={class:"w-full bg-black flex flex-col items-center justify-center py-12 px-0 relative",style:{"min-height":"320px"}},we={class:"w-full max-w-5xl flex flex-col md:flex-row items-start md:items-center justify-between px-0 md:px-8"},_e={class:"flex-1 min-w-0 md:pl-8"},ke={class:"flex items-center gap-2 mb-2 text-sm"},Ee={class:"text-white/80 flex items-center"},Ce={class:"text-white/80"},Pe={class:"text-white text-4xl md:text-5xl font-bold mb-2 mt-2",style:{"letter-spacing":"0.5px"}},Se={class:"text-blue-400 text-2xl md:text-3xl font-bold mb-4"},Le={class:"w-full md:w-[340px] flex-shrink-0 mt-8 md:mt-0 flex justify-center md:justify-end pr-0 md:pr-8"},Me={class:"w-[320px] h-[160px] bg-gray-200 rounded border-2 border-white/30 flex items-center justify-center overflow-hidden"},Te={class:"text-gray-400"},Xe=["src"],je={class:"bg-white min-h-screen py-8 px-4 max-w-3xl mx-auto",style:{"margin-top":"-50px",position:"relative","z-index":"2","box-shadow":"0 8px 24px 0 rgba(0,0,0,0.04)"}},Fe={class:"bg-50 p-4 rounded mb-6"},Ve=["innerHTML"],$e={class:"flex items-center gap-3 mb-6"},Ue={class:"text-lg font-semibold"},Ae=["src"],Be={key:0,class:"w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow cursor-pointer"},Ne={key:0,class:"flex justify-between text-xs text-gray-500 mb-6"},De={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},qe={class:"bg-white rounded-lg shadow-lg p-8 w-full max-w-xs relative"},Re={class:"rounded-2xl bg-white p-6 flex flex-col items-center shadow mb-6"},Ie={class:"flex items-center gap-2 mb-2"},ze={class:"text-gray-400 line-through text-lg"},He={class:"text-orange-400 text-3xl font-bold"},Ze={key:0,class:"text-red-600 text-xs mt-1"},We={key:0,class:"text-red-600 text-xs mt-1"},Oe={key:0,class:"text-red-600 text-xs mt-1"},Ye={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},Ge={class:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative"},Je={class:"text-center"},Ke={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},Qe={class:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative"},et={class:"text-center"},tt={class:"mb-6"},st={class:"flex gap-2 mb-2"},ot=["href"],nt=["href"],lt=["href"],at={class:"text-lg font-bold mb-4 mt-4"},it={class:"font-semibold text-pink-700"},rt={class:"text-xs text-gray-400"},dt={class:"text-gray-700"},ut={key:0,class:"pl-4 mt-2 border-l-2 border-gray-200"},ct={class:"font-semibold text-blue-700"},mt={class:"text-xs text-gray-400"},ft={class:"text-gray-700"},pt={class:"mb-8"},xt={key:0,class:"text-red-600 text-xs mt-1"},vt={key:0,class:"text-red-600 text-xs mt-1"},bt={key:0,class:"text-red-600 text-xs mt-1"},gt={class:"flex items-center"},ht={__name:"PracticeDetail",props:{config:{type:Object,required:!0}},setup(S){ee.add(te,se,oe,ne,le,ae,ie,re);const L=v(!1),x=v(null),{practice:d}=de().props,n=V({name:"",email:"",content:"",website:"",is_show:!0}),a=V({name:"",email:"",content:"",website:""});function H(s){return/^\S+@\S+\.\S+$/.test(s)}function Z(){a.name="",a.email="",a.content="",a.website="";let s=!0;n.name?n.name.length>40&&(a.name="Name must be at most 40 characters.",s=!1):(a.name="Name is required.",s=!1),n.email?H(n.email)||(a.email="Email is invalid.",s=!1):(a.email="Email is required.",s=!1),n.content?n.content.length>2e3&&(a.content="Comment must be at most 2000 characters.",s=!1):(a.content="Comment is required.",s=!1),n.website&&n.website.length>255&&(a.website="Website must be at most 255 characters.",s=!1),s&&z.post("/api/course_practice_topic",{name:n.name,email:n.email,content:n.content,website:n.website,practice_id:d.id,is_show:n.is_show}).then(t=>{t.data.status==200&&($.fire({icon:"success",title:"Success",text:"Your comment has been submitted!"}),n.name="",n.email="",n.content="",n.website="",n.is_show=!0)}).catch(t=>{$.fire({icon:"error",title:"Error",text:t.response.data.message})})}function W(){x.value&&(L.value?(x.value.pause(),L.value=!1):(x.value.play(),L.value=!0))}const f=v(0),M=v(0),T=v(0),B=v(0),k=v(!1);function O(s){if(!k.value){const t=s.target.currentTime;M.value=t,f.value=s.target.duration,T.value=t/f.value*100}}function Y(s){f.value=s.target.duration}function G(s){const t=s.target;if(t.buffered.length>0){const o=t.buffered.end(t.buffered.length-1);B.value=o/t.duration*100}}function J(s){if(!x.value||!f.value)return;const t=s.target.getBoundingClientRect(),E=((s.type.startsWith("touch")?s.touches[0].clientX:s.clientX)-t.left)/t.width*100/100*f.value;x.value.currentTime=E}function N(s){!x.value||!f.value||(k.value=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.addEventListener("touchmove",g),document.addEventListener("touchend",y),g(s))}function g(s){var F;if(!k.value||!x.value||!f.value)return;const t=s.target.closest(".w-full");if(!t)return;const o=t.getBoundingClientRect();let b=(s.type.startsWith("touch")?((F=s.touches[0])==null?void 0:F.clientX)??0:s.clientX)-o.left;b=Math.max(0,Math.min(b,o.width));const E=b/o.width*100;T.value=E,M.value=E/100*f.value}function y(s){var q;if(!k.value||!x.value||!f.value)return;k.value=!1;const t=document.querySelector(".w-full.h-2");if(!t)return;const o=t.getBoundingClientRect();let b=(s.type.startsWith("touch")?((q=s.changedTouches[0])==null?void 0:q.clientX)??0:s.clientX)-o.left;b=Math.max(0,Math.min(b,o.width));const F=b/o.width*100/100*f.value;x.value.currentTime=F,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y)}function D(s){if(!s&&s!==0)return"00:00";const t=Math.floor(s/60),o=Math.floor(s%60);return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}ue(()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y)});const U=v(!1),X=v(!1),j=v(!1),c=V({name:"",email:"",phone:""}),m=V({name:"",email:"",phone:""});function K(s){return/^\S+@\S+\.\S+$/.test(s)}async function Q(){m.name="",m.email="",m.phone="";let s=!0;if(c.name?c.name.length>20&&(m.name="Name must be at most 20 characters.",s=!1):(m.name="Name is required.",s=!1),c.email?K(c.email)||(m.email="Email is invalid.",s=!1):(m.email="Email is required.",s=!1),c.phone||(m.phone="Phone is required.",s=!1),!!s)try{const t=await z.post("/api/practice/paypal",{name:c.name,email:c.email,phone:c.phone,price:d.price,practice_id:d.id});t.data&&t.data.paypal_url?window.location.href=t.data.paypal_url:$.fire({icon:"error",title:"Payment failed",text:"Failed to obtain the payment link"})}catch{$.fire({icon:"error",title:"Payment failed",text:"Failed to obtain the payment link"})}}return ce(()=>{const s=new URLSearchParams(window.location.search),t=s.get("order_no"),o=s.get("step");t&&(o==="success"?X.value=!0:o==="error"&&(j.value=!0)),document.querySelectorAll("rt, span[data-auto-tooltip]").forEach(w=>{w.setAttribute("title",w.innerText||w.textContent)})}),(s,t)=>(r(),me(be,{config:S.config},{default:fe(()=>[e("div",he,[e("div",ye,[e("div",we,[e("div",_e,[e("div",ke,[e("span",Ee,[C(i(P),{icon:["fas","bookmark"],class:"mr-1"}),R(l(i(d).level),1)]),e("span",Ce,"Fun, "+l(i(d).level_label.toUpperCase()),1)]),e("h1",Pe,l(i(d).name),1),e("h2",Se,l(i(d).zh_name),1),t[14]||(t[14]=e("div",{class:"flex gap-2 mb-0"},null,-1))]),e("div",Le,[e("div",Me,[e("span",Te,[e("img",{src:i(d).cover,alt:"practice image"},null,8,Xe)])])])])]),e("div",je,[e("div",Fe,[e("div",{innerHTML:i(d).content},null,8,Ve)]),e("div",$e,[e("button",{onClick:W,class:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white text-2xl focus:outline-none"},[C(i(P),{icon:["fas",L.value?"pause":"volume-up"]},null,8,["icon"])]),e("span",Ue,l(i(d).name),1),e("audio",{ref_key:"audioRef",ref:x,src:i(d).audio,onTimeupdate:O,onLoadedmetadata:Y,onProgress:G},null,40,Ae)]),e("div",{class:"w-full h-2 bg-gray-300 rounded mb-1 relative cursor-pointer select-none",onMousedown:N,onTouchstart:N,onClick:t[0]||(t[0]=o=>J(o))},[e("div",{class:"absolute top-0 left-0 h-2 bg-blue-200 rounded",style:A({width:B.value+"%"})},null,4),e("div",{class:"h-2 bg-green-400 rounded",style:A({width:T.value+"%"})},null,4),e("div",{class:"absolute top-0 left-0 h-2",style:A({left:T.value+"%",transform:"translateX(-50%)"})},[f.value>0?(r(),u("div",Be)):p("",!0)],4)],32),f.value>0?(r(),u("div",Ne,[e("span",null,l(D(M.value)),1),e("span",null,"-"+l(D(f.value-M.value)),1)])):p("",!0),t[31]||(t[31]=e("div",{class:"bg-blue-50 border border-blue-200 rounded p-6 flex flex-col items-center mb-8"},[e("div",{class:"text-center text-blue-900 font-semibold mb-2"}," Let us know your problem or give us some feedback ")],-1)),U.value?(r(),u("div",De,[e("div",qe,[e("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:t[1]||(t[1]=o=>U.value=!1)},"×"),e("div",Re,[t[15]||(t[15]=e("div",{class:"absolute right-0 top-0"},[e("span",{class:"bg-blue-600 text-white text-xs font-bold px-4 py-1 rounded-bl-lg rounded-tr-lg rotate-45 block",style:{position:"absolute",right:"-40px",top:"18px",width:"120px","text-align":"center",transform:"rotate(45deg)"}},"POPULAR")],-1)),t[16]||(t[16]=e("div",{class:"text-purple-700 font-bold text-2xl mb-1 mt-2"},"LIFETIME",-1)),t[17]||(t[17]=e("div",{class:"text-gray-500 mb-2"},"access forever!",-1)),e("div",Ie,[e("span",ze,"$"+l(i(d).origin_price),1),e("span",He,"$"+l(i(d).price),1)]),t[18]||(t[18]=e("button",{class:"border border-orange-400 text-orange-400 rounded px-8 py-2 font-bold mt-2 mb-2 hover:bg-orange-50"},"SELECT",-1)),t[19]||(t[19]=e("div",{class:"text-xs text-gray-400"},"one-time payment",-1))]),t[21]||(t[21]=e("div",{class:"text-xs text-13 text-gray-600 mb-4 text-center"}," To subscribe to this course, please leave your email address and phone number. After successful payment, all the course content will be sent to your email. Please check your email in time! ",-1)),e("form",{class:"space-y-3",onSubmit:I(Q,["prevent"])},[e("div",null,[h(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>c.name=o),type:"text",class:"w-full border rounded p-2",placeholder:"Name"},null,512),[[_,c.name]]),m.name?(r(),u("div",Ze,l(m.name),1)):p("",!0)]),e("div",null,[h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>c.email=o),type:"email",class:"w-full border rounded p-2",placeholder:"Email"},null,512),[[_,c.email]]),m.email?(r(),u("div",We,l(m.email),1)):p("",!0)]),e("div",null,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>c.phone=o),type:"text",class:"w-full border rounded p-2",placeholder:"Phone"},null,512),[[_,c.phone]]),m.phone?(r(),u("div",Oe,l(m.phone),1)):p("",!0)]),t[20]||(t[20]=e("button",{type:"submit",class:"w-full bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 rounded mt-2 flex items-center justify-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5"},[e("path",{d:"M22.5 6.5a2.5 2.5 0 0 0-2.5-2.5h-16A2.5 2.5 0 0 0 1.5 6.5v11A2.5 2.5 0 0 0 4 20h16a2.5 2.5 0 0 0 2.5-2.5v-11ZM4 5h16a1.5 1.5 0 0 1 1.5 1.5V8H2.5V6.5A1.5 1.5 0 0 1 4 5Zm16 14H4A1.5 1.5 0 0 1 2.5 17.5V9H21.5v8.5A1.5 1.5 0 0 1 20 19Z"}),e("path",{d:"M7.5 15.5a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 1 0v2a.5.5 0 0 1-.5.5Zm3.5 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 1 0v2a.5.5 0 0 1-.5.5Zm3.5 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 1 0v2a.5.5 0 0 1-.5.5Z"})]),R(" PayPal ")],-1)),e("button",{type:"button",class:"w-full mt-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 rounded",onClick:t[5]||(t[5]=o=>U.value=!1)}," Close ")],32)])])):p("",!0),X.value?(r(),u("div",Ye,[e("div",Ge,[e("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:t[6]||(t[6]=o=>X.value=!1)},"×"),e("div",Je,[t[22]||(t[22]=e("div",{class:"text-green-500 text-6xl mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-24 w-24 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[23]||(t[23]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-2"},"Payment Successful!",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 mb-6"},"Thank you for your purchase. You can now access all the premium content, Please pay attention to checking your email. ",-1)),e("button",{onClick:t[7]||(t[7]=o=>X.value=!1),class:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors"}," Close ")])])])):p("",!0),j.value?(r(),u("div",Ke,[e("div",Qe,[e("button",{class:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:t[8]||(t[8]=o=>j.value=!1)},"×"),e("div",et,[t[25]||(t[25]=e("div",{class:"text-red-500 text-6xl mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-24 w-24 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t[26]||(t[26]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-2"},"Payment Failed",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 mb-6"},"Sorry, your payment could not be processed. Please try again or contact customer support if the problem persists.",-1)),e("button",{onClick:t[9]||(t[9]=o=>j.value=!1),class:"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors"}," Close ")])])])):p("",!0),e("div",tt,[e("div",st,[e("a",{class:"text-purple-400 hover:text-[#009FE8] transition-colors",href:S.config.instagram_url,target:"_blank"},[C(i(P),{icon:["fab","instagram"]})],8,ot),e("a",{class:"text-black-400 hover:text-[#009FE8] transition-colors",href:S.config.tiktok_url,target:"_blank"},[C(i(P),{icon:["fab","tiktok"]})],8,nt),e("a",{class:"text-red-400 hover:text-[#009FE8] transition-colors",href:S.config.youtube_url,target:"_blank"},[C(i(P),{icon:["fab","youtube"]})],8,lt)]),e("h3",at,l(i(d).topics.length)+" Comments",1),(r(!0),u(xe,null,pe(i(d).topics,o=>(r(),u("div",{class:"mb-4 border-b pb-2",key:o.id},[e("div",it,l(o.name),1),e("div",rt,l(o.created_at),1),e("div",dt,l(o.content),1),o.topic?(r(),u("div",ut,[(r(),u("div",{key:o.topic.id,class:"mb-2"},[e("div",ct,l(o.topic.name),1),e("div",mt,l(o.topic.created_at),1),e("div",ft,l(o.topic.content),1)]))])):p("",!0)]))),128))]),e("div",pt,[t[30]||(t[30]=e("h3",{class:"text-lg font-bold mb-2"},"Leave a Reply",-1)),e("form",{class:"space-y-4",onSubmit:I(Z,["prevent"])},[e("div",null,[h(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>n.content=o),class:"w-full border rounded p-2",rows:"4",placeholder:"Comment *"},null,512),[[_,n.content]]),a.content?(r(),u("div",xt,l(a.content),1)):p("",!0)]),e("div",null,[h(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>n.name=o),class:"w-full border rounded p-2",type:"text",placeholder:"Name"},null,512),[[_,n.name]]),a.name?(r(),u("div",vt,l(a.name),1)):p("",!0)]),e("div",null,[h(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>n.email=o),class:"w-full border rounded p-2",type:"email",placeholder:"Email"},null,512),[[_,n.email]]),a.email?(r(),u("div",bt,l(a.email),1)):p("",!0)]),e("div",gt,[h(e("input",{type:"checkbox",id:"isShow","onUpdate:modelValue":t[13]||(t[13]=o=>n.is_show=o),"true-value":"1","false-value":"0",class:"mr-2"},null,512),[[ve,n.is_show]]),t[28]||(t[28]=e("label",{for:"isShow",class:"text-sm"},"Save my name, email, and website in this browser for the next time I comment.",-1))]),t[29]||(t[29]=e("button",{type:"submit",class:"bg-pink-700 text-white px-4 py-2 rounded"},"Post Comment",-1))],32)])])])]),_:1},8,["config"]))}},kt=ge(ht,[["__scopeId","data-v-b8c9f9c9"]]);export{kt as default};
