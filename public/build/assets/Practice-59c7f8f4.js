import{y as F,A as N,Q as L,r as l,B as z,h as D,q as T,o as n,c as k,w as C,g as $,a,b as B,f as A,v as U,C as q,s as H,i,k as f,F as h,j as I,u as K,l as O,t as d,m as Q}from"./app-77c50d49.js";import{_ as R}from"./App-ec09f112.js";import{_ as G}from"./Banner-7548cc7f.js";import{_ as J}from"./Breadcrumb-df8cd2ec.js";const W={class:"bg-white pt-[112px]"},X={class:"w-full"},Y={class:"max-w-6xl mx-auto w-full px-4 pb-8"},Z={class:"bg-white p-6 rounded-lg shadow mb-8"},ee={class:"flex flex-wrap items-center gap-4"},te={class:"max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 py-8 px-4"},ae={class:"flex items-center px-4 pt-4 pb-2"},se={class:"text-[#2196f3] text-sm font-medium"},re=["src"],oe={class:"px-4 py-3"},le={class:"font-semibold text-base text-gray-800 mb-1"},ne={class:"text-gray-600 text-sm"},ie={class:"max-w-4xl mx-auto flex justify-center items-center gap-2 py-8"},de=["disabled"],ce=["disabled"],ue=["onClick"],pe=["disabled"],ve=["disabled"],ge={key:0,class:"mt-6"},_e={class:"font-bold"},be={class:"text-sm text-gray-500"},ye={__name:"Practice",props:{config:{type:Object,required:!0}},setup(E){F.add(N);const{level_label:P}=L().props,_=l([]),r=l({current_page:1,last_page:1,per_page:6,total:0}),c=z({}),v=l(null),g=l(""),m=l(""),u=l(""),x=l(""),y=l([]),w=async(s=1)=>{const e=await $.get(`/api/course-practices?page=${s}&per_page=${r.value.per_page}&level_label=${P}`);_.value=e.data.data,r.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total}};D(()=>w());const p=s=>{s<1||s>r.value.last_page||w(s)},V=async s=>{try{Object.keys(c).forEach(t=>{c[t]&&t!=s&&(c[t].pause(),c[t].currentTime=0)});const e=c[s];if(!e){console.error("Audio element not found");return}e.readyState===0&&await new Promise((t,o)=>{e.addEventListener("canplaythrough",t,{once:!0}),e.addEventListener("error",o,{once:!0}),e.load()}),v.value===s?(e.pause(),v.value=null):(await e.play(),v.value=s)}catch(e){console.error("Error playing audio:",e),v.value=null}},j=T(()=>{const s=r.value.last_page,e=r.value.current_page;if(s<=7)return Array.from({length:s},(o,S)=>S+1);const t=[];e>3&&t.push(1),e>4&&t.push("...");for(let o=Math.max(1,e-1);o<=Math.min(s,e+1);o++)t.push(o);return e<s-3&&t.push("..."),e<s-2&&t.push(s),t}),b=async()=>{const s=await $.get("/api/course-practices",{params:{search:g.value,level:u.value,hsk:m.value,progress:x.value,level_label:u.value}});_.value=s.data.data,r.value={current_page:s.data.current_page,last_page:s.data.last_page,per_page:s.data.per_page,total:s.data.total}},M=()=>{g.value="",u.value="",m.value="",x.value="",b()};return(s,e)=>(n(),k(R,{config:E.config},{default:C(()=>[a("div",W,[a("div",X,[B(G,{imageSrc:"/images/banner/pratice.jpg",alt:"Practice Banner"})]),a("div",Y,[B(J,{current:"Daily Practice"}),a("div",Z,[a("div",ee,[A(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),onKeyup:q(b,["enter"]),type:"text",placeholder:"Search...",class:"flex-1 border rounded px-4 py-2"},null,544),[[U,g.value]]),A(a("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),class:"border rounded px-4 py-2 min-w-[120px]"},e[6]||(e[6]=[a("option",{value:"0"},"All Levels",-1),a("option",{value:"1"},"Beginner",-1),a("option",{value:"2"},"Intermediate",-1),a("option",{value:"3"},"Advanced",-1)]),512),[[H,u.value]]),a("button",{onClick:b,class:"border border-[#e53958] text-[#e53958] px-4 py-2 rounded hover:bg-[#e53958] hover:text-white transition"},"Apply filters"),a("button",{onClick:M,class:"border border-[#e53958] text-[#e53958] px-4 py-2 rounded hover:bg-[#e53958] hover:text-white transition"},"Clear filters")])]),a("div",te,[(n(!0),i(h,null,f(_.value,t=>(n(),k(K(O),{key:t.id,href:`/practice-detail/${t.id}`,class:"bg-white rounded border border-gray-300 shadow-lg hover:shadow-2xl overflow-hidden transition cursor-pointer",onClick:o=>V(t.id)},{default:C(()=>[a("div",ae,[e[7]||(e[7]=a("svg",{class:"w-4 h-4 text-[#2196f3] mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{d:"M6 2a1 1 0 00-1 1v14l5-3 5 3V3a1 1 0 00-1-1H6z"})],-1)),a("span",se,d(t.level_label)+", Story ",1)]),a("img",{src:t.cover,alt:"cover",class:"w-full h-40 object-cover"},null,8,re),a("div",oe,[a("div",le,d(t.name),1),a("div",ne,d(t.zh_name),1)])]),_:2},1032,["href","onClick"]))),128))]),a("div",ie,[a("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[2]||(e[2]=t=>p(1))},"Home",8,de),a("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===1,onClick:e[3]||(e[3]=t=>p(r.value.current_page-1))},"Previous",8,ce),(n(!0),i(h,null,f(j.value,t=>(n(),i("button",{key:t,class:Q(["border px-3 py-1 rounded",{"bg-[#009FE8] text-white":t===r.value.current_page}]),onClick:o=>p(t)},d(t),11,ue))),128)),a("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[4]||(e[4]=t=>p(r.value.current_page+1))},"Next",8,pe),a("button",{class:"border px-3 py-1 rounded hover:bg-gray-100",disabled:r.value.current_page===r.value.last_page,onClick:e[5]||(e[5]=t=>p(r.value.last_page))},"End",8,ve)]),y.value.length?(n(),i("div",ge,[(n(!0),i(h,null,f(y.value,t=>(n(),i("div",{key:t.id,class:"p-4 border-b"},[a("div",_e,d(t.title),1),a("div",be,d(t.description),1)]))),128))])):I("",!0)])])]),_:1},8,["config"]))}};export{ye as default};
